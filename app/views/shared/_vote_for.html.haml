- rating = votable.plusminus
- css_prefix = (rating >= 0) ? "pic_vote_positive" : "pic_vote_negative"

- if votable.class.name == "Comment"
  - path = polymorphic_path([votable.commentable, votable, votable.votes.build])
  - complaint_path = new_polymorphic_path([votable.commentable, votable, votable.complaints.build])
- else
  - path = polymorphic_path([votable, votable.votes.build])
  - complaint_path = new_polymorphic_path([votable, votable.complaints.build])

%div(class="pic_vote #{css_prefix}")
  .pic_vote__up
    = form_tag path, remote: !current_user.nil? do 
      = hidden_field_tag :sign, "up"
      = button_tag "", {class: "icon-thumbs-up ui-link", type: "submit"}
  .pic_vote__count
    = rating
  .pic_vote__down
    = form_tag path, remote: !current_user.nil? do 
      = hidden_field_tag :sign, "down"
      = button_tag "", {class: "icon-thumbs-down ui-link"}
  .pic_vote__spam
    = link_to "", complaint_path, {class: "icon-flag ui-link", title: "Пожаловаться", target: :blank }
